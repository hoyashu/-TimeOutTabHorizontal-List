<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, viewport-fit=cover">
    <title>ì¿ í‚¤, íƒ­ ê¸°ëŠ¥ êµ¬í˜„</title>
    <link rel="stylesheet" href="./static/css/reset.css">
    <link rel="stylesheet" href="./static/css/common.css">
</head>

<body>
    <div id="header">
        <div class="time_banner"><i class="icon">â°</i><span class="day"></span>ì¼ <span class="hours"></span>ì‹œê°„ <span
                class="min"></span>ë¶„ ë‚¨ì•˜ì–´ìš”!</div>
        <h1>ë…ì  ìµœì €ê°€, ì´ë²ˆì£¼ í•«ë”œ!</h1>
        <p class="sub_title">í¬í„¸, ì‡¼í•‘ëª° ë“± ì–´ë””ì™€ ë¹„êµí•´ë„ ìš°ì£¼ ë§ˆì¼“ì´ ìµœì €ê°€ì—ìš”.</p>
    </div>
    <div id="content">
        <div id="tab">
            <ul class="tab_btns">
                <li class="tab_item active" data-index="1"><i class="icon">ğŸ“</i>ì•„ì„ë‹­ ì•„ì„ì›°</li>
                <li class="tab_item" data-index="2"><i class="icon">ğŸœ</i>ì•„ì„ì¿¡ë°€</li>
                <li class="tab_item" data-index="3"><i class="icon">ğŸ¥£</i>ë§ˆì´ë¹„ë°€</li>
                <li class="tab_item" data-index="4"><i class="icon">ğŸ“</i>ìŠ¬ë¦¼ì¿¡</li>
                <li class="tab_item" data-index="5"><i class="icon">ğŸœ</i>ë°€í‚¤íŒŒì¸ë“œ</li>
                <li class="tab_item" data-index="6"><i class="icon">ğŸ¥£</i>ê·¸ë¦­ë°ì´</li>
                <li class="tab_item" data-index="7"><i class="icon">ğŸ“</i>ì„œë¹„í‘¸ë“œ</li>
                <li class="tab_item" data-index="8"><i class="icon">ğŸœ</i>ìì˜¨</li>
                <li class="tab_item" data-index="9"><i class="icon">ğŸ¥£</i>í˜¸ë‘ì´</li>
                <li class="tab_item" data-index="10"><i class="icon">ğŸ“</i>ê¹€ë°¥</li>
                <li class="tab_item" data-index="11"><i class="icon">ğŸœ</i>ê³ ì–‘ì´</li>
                <li class="tab_item" data-index="12"><i class="icon">ğŸ¥£</i>í–¥ìˆ˜</li>
                <li class="tab_item" data-index="13"><i class="icon">ğŸ“</i>ì¹´ë©”ë¼</li>
                <li class="tab_item" data-index="14"><i class="icon">ğŸœ</i>ì—°í•„</li>
                <li class="tab_item" data-index="15"><i class="icon">ğŸ¥£</i>ë°€í¬</li>
                <li class="tab_item" data-index="16"><i class="icon">ğŸ“</i>í•‘í¬</li>
                <li class="tab_item" data-index="17"><i class="icon">ğŸœ</i>í–‰ë³µ</li>
                <li class="tab_item" data-index="18"><i class="icon">ğŸ¥£</i>ì›ƒìŒ</li>
                <li class="tab_item" data-index="19"><i class="icon">ğŸ“</i>í–‡ì‚´</li>
                <li class="tab_item" data-index="20"><i class="icon">ğŸœ</i>ìƒ‰ì—°í•„</li>
            </ul>
            <div class="tab_content">
                <div class="item_box_outer">
                    <ul class="item_box">
                        <!-- ìƒí’ˆëª©ë¡ -->
                    </ul>
                </div>
                <div class="event_box">
                    <div class="event"><b>ì•„ì„ë‹­ ì•„ì„ì›°</b><span>3ë§Œì›ì´ìƒ ë¬´ë£Œë°°ì†¡ | 1+1 | ì‚¬ì€í’ˆ</span></div>
                </div>
            </div>
        </div>
        <div class="btn btn_big">ìµœì €ê°€ í•«ë”œ ì „ì²´ ìƒí’ˆ ë³´ê¸°<i class="icon">&gt;</i></div>
    </div>

    <script>
        // ###### íƒ€ì´ë¨¸ ì‹œì‘ ######
        //íƒ€ì´ë¨¸ ì‹œê°„ ì„¤ì •
        var expDay = 5;
        var expHours = 11;
        var expMin = 10;

        document.addEventListener("DOMContentLoaded", () => {
            /* ### íƒ€ì´ë¨¸ ì‹œì‘ ### */
            let day;
            let hours;
            let min;

            //ë°©ë¬¸ ê¸°ë¡ì´ ìˆëŠ” ê²½ìš°
            if (getCookie("timeout")) {
                const now = new Date().getTime();
                const expDate = new Date(getCookie("timeout")).getTime();
                const leftSec = expDate - now;
                day = Math.floor(leftSec / (1000 * 60 * 60 * 24));
                hours = Math.floor((leftSec % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                min = Math.floor((leftSec % (1000 * 60 * 60)) / (1000 * 60));
            } else {
                //ì²« ë°©ë¬¸ì¸ ê²½ìš° ì´ˆê¸° ì„¤ì • ê°’ í‘œì‹œ
                day = expDay;
                hours = expHours;
                min = expMin;
                //ì¿ í‚¤ ë“±ë¡
                setCookie("timeout");
            }

            //íƒ€ì´ë¨¸ ê°’ ì¶œë ¥
            document.querySelector(".time_banner .day").innerText = day;
            document.querySelector(".time_banner .hours").innerText = hours;
            document.querySelector(".time_banner .min").innerText = min;
            /* ### íƒ€ì´ë¨¸ ë ### */
        })

        //ì¿ í‚¤ ì‚­ì œ
        function delCookie(name) {
            document.cookie = name + '=; expires=Thu, 01 Jan 1999 00:00:10 GMT;';
        }

        //ì¿ í‚¤ ì €ì¥
        function setCookie(name) {
            const expDate = new Date();
            const expires = ((expDay * 24 * 60 * 60) + (expHours * 60 * 60) + expMin * 60) * 1000;
            expDate.setTime(expDate.getTime() + expires);
            document.cookie = name + "=" + escape(expDate.toGMTString()) + "; path=/; expires=" + expDate
                .toGMTString() + ";"
        }

        //ì¿ í‚¤ ì¶”ì¶œ
        function getCookie(name) {
            const nameOfCookie = name + "=";
            let x = 0;
            while (x <= document.cookie.length) {
                const y = (x + nameOfCookie.length);
                if (document.cookie.substring(x, y) == nameOfCookie) {
                    if ((endOfCookie = document.cookie.indexOf(";", y)) == -1) endOfCookie = document.cookie.length;
                    return unescape(document.cookie.substring(y, endOfCookie));
                }
                x = document.cookie.indexOf(" ", x) + 1;
                if (x === 0) break;
            }
            return "";
        }
        // ###### íƒ€ì´ë¨¸ ë ######
    </script>

    <script>
        // ajaxí†µì‹ ìœ¼ë¡œ ê°€ì ¸ì˜¬ data
        var listData = [{
                "brandName": "ì•„ì„ë‹­",
                "brandCode": 1,
                "event": 1,
                "itemList": [{
                    "name": "ë‹­ê°€ìŠ´ì‚´ ë”ë¸”ìŠ¤í…Œì´í¬ ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ì•„ì„ì¿¡ë°€",
                "brandCode": 2,
                "event": 0,
                "itemList": [{
                    "name": "í•œì…ê°€ë“ ìŠ¤íŒ€ ë‹­ê°€ìŠ´ì‚´ 6ì¢… í˜¼í•© 12/24/36/48íŒ© [ì•„ì„ë‹­ë°ì´]",
                    "img": "./static/img/thumb2.jpeg",
                    "taste": 2,
                    "good": 3.1,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "ë§ˆì´ë¹„ë°€",
                "brandCode": 3,
                "event": 0,
                "itemList": [{
                    "name": "í”„ë‘í¬ ì†Œì‹œì§€ 5ì¢… í˜¼í•© 10/20/30íŒ© [ì•„ì„ë‹­ë°ì´]",
                    "img": "./static/img/thumb3.jpeg",
                    "taste": 4,
                    "good": 1.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ìŠ¬ë¦¼ì¿¡",
                "brandCode": 4,
                "event": 0,
                "itemList": [{
                    "name": "ì‰í”„ë©”ì´ë“œ ë‹­ê°€ìŠ´ì‚´ 4ì¢… í˜¼í•© 12/24/36/48íŒ© [ì•„ì„ë‹­ë°ì´]",
                    "img": "./static/img/thumb4.jpeg",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "ë°€í‚¤íŒŒì¸ë“œ",
                "brandCode": 5,
                "event": 0,
                "itemList": [{
                    "name": "ì‰í”„ë©”ì´ë“œ í†µí›„ì¶”ë§› ë‹­ê°€ìŠ´ì‚´ 12/24/36íŒ© [ì•„ì„ë‹­ë°ì´]",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "ê·¸ë¦­ë°ì´",
                "brandCode": 6,
                "event": 0,
                "itemList": [{
                    "name": "ë‹´ë°±ë‹¬ì½¤ ìŠ¤í‹±í˜• êµ°ê³ êµ¬ë§ˆë°” (8ê°œì…) 1/3/6íŒ©",
                    "img": "./static/img/thumb4.jpeg",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "ì„œë¹„í‘¸ë“œ",
                "brandCode": 7,
                "event": 0,
                "itemList": [{
                    "name": "í†µë°€ ë¸Œë¦¬ë˜ 4ì¢… í˜¼í•© 8/12/16íŒ©",
                    "img": "./static/img/thumb3.jpeg",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ìì˜¨",
                "brandCode": 8,
                "event": 0,
                "itemList": [{
                    "name": "ì«€ë“ì«€ë“ ê³¤ì•½ ì°°ë°” 4ì¢… í˜¼í•© 12/20/28íŒ©",
                    "img": "./static/img/thumb2.jpeg",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "í˜¸ë‘ì´",
                "brandCode": 9,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb3.jpeg",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ê¹€ë°¥",
                "brandCode": 10,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 28,
                    "originPrice": 30000,
                    "sellPrice": 21600
                }]
            },
            {
                "brandName": "ê³ ì–‘ì´",
                "brandCode": 11,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "í–¥ìˆ˜",
                "brandCode": 12,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ì¹´ë©”ë¼",
                "brandCode": 13,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ì—°í•„",
                "brandCode": 14,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ë°€í¬",
                "brandCode": 15,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "í•‘í¬",
                "brandCode": 16,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "í–‰ë³µ",
                "brandCode": 17,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ì›ƒìŒ",
                "brandCode": 18,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "í–‡ì‚´",
                "brandCode": 19,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            },
            {
                "brandName": "ìƒ‰ì—°í•„",
                "brandCode": 20,
                "event": 0,
                "itemList": [{
                    "name": "ëª¨ì§œë ë¼ ì¹˜ì¦ˆ",
                    "img": "./static/img/thumb1.png",
                    "taste": 4.9,
                    "good": 4.9,
                    "per": 45,
                    "originPrice": 2270,
                    "sellPrice": 1490
                }]
            }
        ];
    </script>

    <script>
        // ###### [2] ~ íƒ­ ì‹œì‘ ######
        //tab ul
        const tabBtn = document.getElementsByClassName("tab_item");
        const itemBox = document.querySelector(".item_box");

        //í™”ë©´ ë¡œë“œì‹œ, ë§¨ ì²«ë²ˆì§¸ tab active
        document.addEventListener("DOMContentLoaded", () => {
            itemBox.setAttribute('tabIndex', 1);
            const el = tabBtn[0];
            makeContent(el, 1);
        })


        for (var i = 0; i < tabBtn.length; i++) {
            tabBtn[i].addEventListener('click', function () {
                //tab active
                this.classList.add('active')

                //í´ë¦­í•œ tab indexí™•ì¸
                const clickIndex = this.dataset.index
                //í˜„ì¬ content indexí™•ì¸
                const contentIndex = itemBox.dataset.index;
                //í˜„ì¬ ì¼œì ¸ìˆëŠ” íƒ­ì„ ë˜ ëˆ„ë¥¸ ê²½ìš°ë¥¼ ì œì™¸í•˜ê³  ì‘ë™í•œë‹¤.
                if (contentIndex !== clickIndex) {
                    //íƒ­ content ë³€ê²½
                    makeContent(this, clickIndex);
                }
            })

            //capture optionì„ ì‚¬ìš©í•´ì„œ clickì „ ëª¨ë“  tab activeìƒíƒœ í•´ì œ
            tabBtn[i].addEventListener('click', captureHandler, {
                capture: true
            });
        };

        //ëª¨ë“  tab activeí•´ì œ 
        function captureHandler(event) {
            for (var i = 0; i < tabBtn.length; i++) {
                tabBtn[i].classList.remove('active');
            };
        };

        //ì„¸ìë¦¿ìˆ˜ì— ì½¤ë§ˆ ì¶”ê°€
        let numberDot = (x) => x.toLocaleString('ko-KR');

        //[3] - 1 ~ íƒ­ì— ë”°ë¥¸ ëª©ë¡ ë³€ê²½
        let makeContent = (el, tabIndex) => {
            //ulì˜ tabIndexë¥¼ ëˆ„ë¥¸ tab indexë¡œ ë³€ê²½
            itemBox.setAttribute('tabIndex', tabIndex);

            //íƒ­ì˜ indexì™€ ê°™ì€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            const result = listData.filter(e => (e.brandCode * 1) === (tabIndex * 1));
            const activeItemList = result[0].itemList;
            const item = `<li class="item">
                            <div class="img_box">
                                <a href="#">
                                    <div class="low_label"><span>â†“<br>ìµœì €ê°€</span></div>
                                    <div class="thumb_box">
                                        <img src="${activeItemList[0].img}" alt="${activeItemList[0].name}">
                                    </div>
                                </a>
                                <div class="btn btn_add_cart"><img src="./static/img/ico-cart.png" alt="ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜"></div>
                            </div>
                            <div class="dec_box">
                                <a href="#">
                                    <div class="dec_name">
                                        <span class="brand">${result[0].brandName}</span>
                                        <span class="title">${activeItemList[0].name}</span>
                                    </div>
                                    <div class="dec_star">
                                        <ul>
                                            <li>ë§›<i class="icon">â˜…</i><span class="star">${activeItemList[0].taste}</span></li>
                                            <li>ì•ˆì§ˆë¦¼<i class="icon">â˜…</i><span class="star">${activeItemList[0].good}</span></li>
                                        </ul>
                                    </div>
                                    <div class="dec_price">
                                        <p class="origin_price">${numberDot(activeItemList[0].originPrice)}ì›</p>
                                        <p class="sell_price"><span class="per">${activeItemList[0].per}%</span>${numberDot(activeItemList[0].sellPrice)}ì›</p>
                                    </div>
                                </a>
                            </div>
                        </li>`;

            //ìƒˆë¡œìš´ ëª©ë¡ìœ¼ë¡œ ë³€ê²½            
            let htlr = "";
            for (let i = 0; i < tabIndex; i++) {
                htlr += item
            }
            itemBox.innerHTML = htlr;

            //í•´ë‹¹ ë¸Œëœë“œì—ì„œ ì§„í–‰ì¤‘ì¸ ì´ë²¤íŠ¸ê°€ ìˆëŠ” ê²½ìš°, ê´‘ê³  ë°°ë„ˆ ì¶œë ¥
            var eventTxt = "";
            if (result[0].event > 0) {
                eventTxt = `<div class="event"><b>ì•„ì„ë‹­ ì•„ì„ì›°</b><span>3ë§Œì›ì´ìƒ ë¬´ë£Œë°°ì†¡ | 1+1 | ì‚¬ì€í’ˆ</span></div>`;
            }
            document.querySelector(".event_box").innerHTML = eventTxt;

            //[3] - 2 ~ í•´ë‹¹ ë¸Œëœë“œëª…ê³¼ ëª©ë¡ì¸ë±ìŠ¤ ì½˜ì†” ì¶œë ¥
            console.log(result[0].brandName);
            console.log(activeItemList);
        };
    </script>

    <script>
        //[4] ~ Alert ë°œìƒ
        document.querySelector(".btn_big").addEventListener("click", evt => {
            alert("ìµœì €ê°€ í•«ë”œ ì „ì²´ ìƒí’ˆë³´ê¸°");
        })
    </script>
</body>

</html>